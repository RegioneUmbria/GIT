#--------------------------------------------------------------
# File di configurazione in cui sono indicato i valori dei soli
# parametri di contesto della catena jelly da passare alla 
# regola 
#------------------------------------------------------------
# Numero di parametri previsti in input
rengine.jchain.in.nof=2
#------------------------------------------------------------
# Le coppie chiavi/valore hanno come key lo stesso nome 
# indicato nello script jelly xml
#------------------------------------------------------------
rengine.jchain.in.1.key=COMANDISQL_1
rengine.jchain.in.1.value=INSERT INTO  LOCAZIONI_A (UFFICIO,ANNO,SERIE,NUMERO,COD_CAT_COMUNE,INDIRIZZO,TIPO_RECORD,FORNITURA ) select SUBSTR(RIGA_LOCAZIONI, 2, 3) UFFICIO, TO_NUMBER_ALL(SUBSTR(RIGA_LOCAZIONI, 5, 4)) ANNO,SUBSTR(RIGA_LOCAZIONI, 9, 2) SERIE, TO_NUMBER_ALL(SUBSTR(RIGA_LOCAZIONI, 11, 6)) NUMERO,SUBSTR(RIGA_LOCAZIONI, 17, 4) COD_CAT_COMUNE, SUBSTR(RIGA_LOCAZIONI, 21, 40) INDIRIZZO,SUBSTR(RIGA_LOCAZIONI, 1, 1) TIPO_RECORD, TO_NUMBER(TO_CHAR(CARONTE_DATA_INIZIO_VAL, 'YYMMDDHH24MISS')) FORNITURA     from locazioni_1_0 where caronte_flag_elaborato = 0 and SUBSTR(RIGA_LOCAZIONI, 1, 1) = 'A'; INSERT INTO  LOCAZIONI_B (UFFICIO,ANNO,SERIE,NUMERO,PROG_SOGGETTO,TIPO_SOGGETTO,CODICEFISCALE,SESSO,CITTA_NASCITA,PROV_NASCITA,DATA_NASCITA,CITTA_RESIDENZA,PROV_RESIDENZA,INDIRIZZO_RESIDENZA,CIVICO_RESIDENZA,TIPO_RECORD,FORNITURA) select SUBSTR(RIGA_LOCAZIONI,2, 3) UFFICIO, TO_NUMBER_ALL(SUBSTR(RIGA_LOCAZIONI,5, 4)) ANNO, SUBSTR(RIGA_LOCAZIONI,9, 2) SERIE, TO_NUMBER_ALL(SUBSTR(RIGA_LOCAZIONI,11, 6)) NUMERO, TO_NUMBER_ALL(SUBSTR(RIGA_LOCAZIONI,17, 3)) PROG_SOGGETTO, SUBSTR(RIGA_LOCAZIONI,20, 1) TIPO_SOGGETTO, SUBSTR(RIGA_LOCAZIONI,21, 16) CODICEFISCALE, SUBSTR(RIGA_LOCAZIONI,37, 1) SESSO, SUBSTR(RIGA_LOCAZIONI,38, 30) CITTA_NASCITA, SUBSTR(RIGA_LOCAZIONI,68, 2) PROV_NASCITA, SUBSTR(RIGA_LOCAZIONI,70, 10) DATA_NASCITA, SUBSTR(RIGA_LOCAZIONI,80, 30) CITTA_RESIDENZA, SUBSTR(RIGA_LOCAZIONI,110, 2) PROV_RESIDENZA, SUBSTR(RIGA_LOCAZIONI,112, 35) INDIRIZZO_RESIDENZA, SUBSTR(RIGA_LOCAZIONI,147, 6) CIVICO_RESIDENZA, SUBSTR(RIGA_LOCAZIONI,1, 1) TIPO_RECORD, TO_NUMBER(TO_CHAR(CARONTE_DATA_INIZIO_VAL, 'YYMMDDHH24MISS')) FORNITURA     from locazioni_1_0 where caronte_flag_elaborato = 0 and SUBSTR(RIGA_LOCAZIONI, 1, 1) = 'B'; UPDATE locazioni_1_0 SET caronte_flag_elaborato = 1 where caronte_flag_elaborato = 0;
rengine.jchain.in.2.key=TABELLE_SEMAFORO
rengine.jchain.in.2.value=locazioni_1_0