#--------------------------------------------------------------
# File di configurazione in cui sono indicato i valori dei soli
# parametri di contesto della catena jelly da passare alla 
# regola 
#------------------------------------------------------------
# Numero di parametri previsti in input
rengine.jchain.in.nof=2
#------------------------------------------------------------
# Le coppie chiavi/valore hanno come key lo stesso nome 
# indicato nello script jelly xml
#------------------------------------------------------------
rengine.jchain.in.1.key=QUERYSQL_1
rengine.jchain.in.1.value=SELECT RFAMNUMF, TO_CHAR(RFAMNUMF) ID_ORIG_D_FAMIGLIA, 'R' TIPO_FAMIGLIA, RFAMCONV DENOMINAZIONE_FAMIGLIA, TO_CHAR(resi_indirizzo.RIND_NCIVNCIV) ID_ORIG_D_CIVICO, resi_indirizzo.RIND_NCIVNCIV RIND_NCIVNCIV, resi_indirizzo.CARONTE_DATA_INIZIO_VAL DT_EXP_DATO, resi_indirizzo.RINDDATA DT_INI_VAL_DATO, RINDDATA, resi_indirizzo.RINDDAFI DT_FINE_VAL_DATO FROM DS_D_RESI_FAMIGLIE_1_0 f_r, DS_D_RESI_INDIRIZZO_1_0 resi_indirizzo WHERE resi_indirizzo.CARONTE_FLAG_ELABORATO = 0 AND f_r.rfamnumf = resi_indirizzo.rind_rfamnumf (+)
rengine.jchain.in.2.key=RSITRSCRIPT_1
rengine.jchain.in.2.value=<RsIterator> <key table="DS_D_RESI_INDIRIZZO_1_0"> <column name="RFAMNUMF"/> <column name="RIND_NCIVNCIV"/> <column name="RINDDATA"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="it.webred.rulengine.brick.loadDwh.base.LoadSitDFamiglia" livelloAnomalie="2"> <param id="field" value="ID_ORIG_D_FAMIGLIA" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="TIPO_FAMIGLIA" dest="TIPOFAMI" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_CIVICO" dest="ID_ORIG_D_CIVICO" type="java.lang.String"/> <param id="field" value="DENOMINAZIONE_FAMIGLIA" dest="DENOMINAZIONE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_INI_VAL_DATO" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_FINE_VAL_DATO" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="it.webred.rulengine.brick.core.EseguiSql"> <param id="const" dest="SQL" type="java.lang.String"> <![CDATA[ update DS_D_RESI_INDIRIZZO_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE rind_rfamnumf=? AND RIND_NCIVNCIV = ? AND RINDDATA = ? AND CARONTE_DATA_INIZIO_VAL=? ]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[RFAMNUMF]] </param> <param name="param2"> [[RIND_NCIVNCIV]] </param> <param name="param3"> [[RINDDATA]] </param> <param name="param4"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>