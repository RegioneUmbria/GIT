#--------------------------------------------------------------
# File di configurazione in cui sono indicato i valori dei soli
# parametri di contesto della catena jelly da passare alla 
# regola 
#------------------------------------------------------------
# Numero di parametri previsti in input
rengine.jchain.in.nof=20
#------------------------------------------------------------
# Le coppie chiavi/valore hanno come key lo stesso nome 
# indicato nello script jelly xml
#------------------------------------------------------------
rengine.jchain.in.1.key=QUERYSQL_1
rengine.jchain.in.1.value=SELECT TO_CHAR(PERSNIND) ID_ORIG, PERSNIND, PERSCOGN COGNOME, PERSNOME NOME, DECODE(PERSSESSO,1,'M',2,'F',NULL) SESSO, POSIANA.CPOADESC POSIZ_ANA, LPAD(TO_CHAR(PERS_CCOMPROVNA),3,'0') ID_ORIG_PROVINCIA_NASCITA, LPAD(TO_CHAR(PERS_CCOMPROVNA),3,'0') || LPAD(TO_CHAR(PERS_CCOMCODINA),3,'0') ID_ORIG_COMUNE_NASCITA, PERSNASCDATA DATA_NASCITA, TO_CHAR(PERS_PERSNINDPADR) ID_ORIG_D_PERSONA_PADRE, TO_CHAR(PERS_PERSNINDMADR) ID_ORIG_D_PERSONA_MADRE, DECODE(D_P.PERSSESSO,1,staciv.ccivdescma,staciv.ccivdescfe) STATO_CIVILE, TO_CHAR(PERS_CSTACODI) ID_ORIG_STATO, PERSCODIFISC CODFISC, PERSMORTDATA DATA_MOR, LPAD(TO_CHAR(PERS_CCOMPROVMO),3,'0') ID_ORIG_PROVINCIA_MOR, LPAD(TO_CHAR(PERS_CCOMPROVMO),3,'0') || LPAD(PERS_CCOMCODIMO,3,'0') ID_ORIG_COMUNE_MOR, DECODE(D_P.pers_cpoacodi,10, LPAD(TO_CHAR(i_c.isca_ccomprovi),3,'0') || LPAD(i_c.isca_ccomcodii,3,'0') ,NULL) ID_ORIG_COMUNE_IMM, DECODE(D_P.pers_cpoacodi,10, LPAD(TO_CHAR(i_c.isca_ccomprovi),3,'0'),NULL) ID_ORIG_PROVINCIA_IMM, DECODE(D_P.pers_cpoacodi,10, i_c.iscadatai,NULL) DATA_IMM, DECODE(D_P.pers_cpoacodi,40, LPAD(TO_CHAR(i_c.isca_ccomprovi),3,'0') || LPAD(i_c.isca_ccomcodii,3,'0'), 30, LPAD(TO_CHAR(i_c.isca_ccomprovi),3,'0') || LPAD(i_c.isca_ccomcodii,3,'0'),NULL) ID_ORIG_COMUNE_EMI, DECODE(D_P.pers_cpoacodi,40,LPAD(TO_CHAR(i_c.isca_ccomprovi),3,'0'),30, LPAD(TO_CHAR(i_c.isca_ccomprovi),3,'0'),60, LPAD(TO_CHAR(i_c.isca_ccomprovi),3,'0'),NULL) ID_ORIG_PROVINCIA_EMI, DECODE(D_P.pers_cpoacodi,40,i_c.iscadatai, 30, i_c.iscadatai,60, i_c.iscadatai,NULL) DATA_EMI, D_P.CARONTE_DATA_INIZIO_VAL DT_EXP_DATO FROM DS_D_PERSONE_1_0 D_P, DS_D_CODI_POSIANA_1_0 posiana, DS_D_CODI_STATCIVILE_1_0 staciv, (SELECT isca_persnind, isca_ccomcodii, isca_ccomprovi, iscadatai FROM DS_D_ISCR_CANC_1_0 i_c1 WHERE iscadatai = ( SELECT MAX (iscadatai) FROM DS_D_ISCR_CANC_1_0 i_c2 WHERE i_c2.isca_persnind = i_c1.isca_persnind)) i_c WHERE d_p.pers_cpoacodi = posiana.cpoacodi(+) AND d_p.pers_ccivcodi = staciv.ccivcodi(+) AND d_p.persnind = i_c.isca_persnind(+) AND D_P.CARONTE_FLAG_ELABORATO = 0
rengine.jchain.in.2.key=RSITRSCRIPT_1
rengine.jchain.in.2.value=<RsIterator> <key table="DS_D_PERSONE_1_0"> <column name="ID_ORIG"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SIT_D_PERS" livelloAnomalie="2"> <param id="field" value="ID_ORIG" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="COGNOME" dest="COGNOME" type="java.lang.String"/> <param id="field" value="NOME" dest="NOME" type="java.lang.String"/> <param id="field" value="SESSO" dest="SESSO" type="java.lang.String"/> <param id="field" value="CODFISC" dest="CODFISC" type="java.lang.String"/> <param id="field" value="POSIZ_ANA" dest="POSIZ_ANA" type="java.lang.String"/> <param id="field" value="STATO_CIVILE" dest="STATO_CIVILE" type="java.lang.String"/> <param id="const" value="" dest="DES_PERSONA" type="java.lang.String"/> <param id="const" value="" dest="DATA_INIZIO_RESIDENZA" type="java.sql.Timestamp"/> <param id="field" value="ID_ORIG_STATO" dest="ID_ORIG_STATO" type="java.lang.String"/> <param id="field" value="ID_ORIG_PROVINCIA_IMM" dest="ID_ORIG_PROVINCIA_IMM" type="java.lang.String"/> <param id="field" value="ID_ORIG_COMUNE_IMM" dest="ID_ORIG_COMUNE_IMM" type="java.lang.String"/> <param id="field" value="DATA_IMM" dest="DATA_IMM" type="java.sql.Timestamp"/> <param id="field" value="ID_ORIG_PROVINCIA_EMI" dest="ID_ORIG_PROVINCIA_EMI" type="java.lang.String"/> <param id="field" value="ID_ORIG_COMUNE_EMI" dest="ID_ORIG_COMUNE_EMI" type="java.lang.String"/> <param id="field" value="DATA_EMI" dest="DATA_EMI" type="java.sql.Timestamp"/> <param id="field" value="ID_ORIG_PROVINCIA_MOR" dest="ID_ORIG_PROVINCIA_MOR" type="java.lang.String"/> <param id="field" value="ID_ORIG_COMUNE_MOR" dest="ID_ORIG_COMUNE_MOR" type="java.lang.String"/> <param id="field" value="DATA_MOR" dest="DATA_MOR" type="java.sql.Timestamp"/> <param id="field" value="ID_ORIG_PROVINCIA_NASCITA" dest="ID_ORIG_PROVINCIA_NASCITA" type="java.lang.String"/> <param id="field" value="ID_ORIG_COMUNE_NASCITA" dest="ID_ORIG_COMUNE_NASCITA" type="java.lang.String"/> <param id="field" value="DATA_NASCITA" dest="DATA_NASCITA" type="java.sql.Timestamp"/> <param id="field" value="ID_ORIG_D_PERSONA_MADRE" dest="ID_ORIG_D_PERSONA_MADRE" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_PERSONA_PADRE" dest="ID_ORIG_D_PERSONA_PADRE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_PERSONE_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE PERSNIND=? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[PERSNIND]] </param> <param name="param2"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.3.key=QUERYSQL_2
rengine.jchain.in.3.value=SELECT RFAMNUMF, TO_CHAR(RFAMNUMF) ID_ORIG_D_FAMIGLIA, 'R' TIPO_FAMIGLIA, RFAMCONV DENOMINAZIONE_FAMIGLIA, TO_CHAR(resi_indirizzo.RIND_NCIVNCIV) ID_ORIG_D_CIVICO, resi_indirizzo.RIND_NCIVNCIV RIND_NCIVNCIV, resi_indirizzo.CARONTE_DATA_INIZIO_VAL DT_EXP_DATO, resi_indirizzo.RINDDATA DT_INI_VAL_DATO, RINDDATA, resi_indirizzo.RINDDAFI DT_FINE_VAL_DATO FROM DS_D_RESI_FAMIGLIE_1_0 f_r, DS_D_RESI_INDIRIZZO_1_0 resi_indirizzo WHERE resi_indirizzo.CARONTE_FLAG_ELABORATO = 0 AND f_r.rfamnumf = resi_indirizzo.rind_rfamnumf (+)
rengine.jchain.in.4.key=RSITRSCRIPT_2
rengine.jchain.in.4.value=<RsIterator> <key table="DS_D_RESI_INDIRIZZO_1_0"> <column name="RFAMNUMF"/> <column name="RIND_NCIVNCIV"/> <column name="RINDDATA"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SIT_D_FAMI" livelloAnomalie="2"> <param id="field" value="ID_ORIG_D_FAMIGLIA" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="TIPO_FAMIGLIA" dest="TIPOFAMI" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_CIVICO" dest="ID_ORIG_D_CIVICO" type="java.lang.String"/> <param id="field" value="DENOMINAZIONE_FAMIGLIA" dest="DENOMINAZIONE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_INI_VAL_DATO" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_FINE_VAL_DATO" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_RESI_INDIRIZZO_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE rind_rfamnumf=? AND RIND_NCIVNCIV = ? AND RINDDATA = ? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[RFAMNUMF]] </param> <param name="param2"> [[RIND_NCIVNCIV]] </param> <param name="param3"> [[RINDDATA]] </param> <param name="param4"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.5.key=QUERYSQL_3
rengine.jchain.in.5.value=SELECT TO_CHAR (posifami.rpof_rfamnumf) id_orig_d_famiglia, TO_CHAR (posifami.rpof_persnind) id_orig_d_persona, posifami.rpofdata, posifami.rpofdatfin, resi_indirizzo.rinddata, resi_indirizzo.rinddafi, CASE WHEN NVL (posifami.rpofdata, TO_DATE ('01-01-1001', 'dd-mm-yyyy') ) < NVL (resi_indirizzo.rinddata, TO_DATE ('01-01-1001', 'dd-mm-yyyy') ) THEN resi_indirizzo.rinddata ELSE posifami.rpofdata END dt_ini_val_dato, CASE WHEN NVL (posifami.rpofdatfin, TO_DATE ('31-12-9999', 'dd-mm-yyyy') ) < NVL (resi_indirizzo.rinddafi, TO_DATE ('31-12-9999', 'dd-mm-yyyy') ) THEN posifami.rpofdatfin ELSE resi_indirizzo.rinddafi END dt_fine_val_dato, d_c.crepdesc relaz_par, TO_CHAR (resi_indirizzo.rind_ncivnciv) id_orig_d_civico, posifami.caronte_data_inizio_val dt_exp_dato, rpof_rfamnumf, rpof_persnind, rpofdata FROM ds_d_resi_posifami_1_0 posifami, ds_d_codi_relpar_1_0 d_c, ds_d_resi_indirizzo_1_0 resi_indirizzo WHERE posifami.rpof_crepcodi = d_c.crepcodi(+) AND rpof_rfamnumf = resi_indirizzo.rind_rfamnumf(+) AND NVL (posifami.rpofdata, TO_DATE ('01-01-1001', 'dd-mm-yyyy')) < NVL (resi_indirizzo.rinddafi, TO_DATE ('31-12-9999', 'dd-mm-yyyy')) AND NVL (posifami.rpofdatfin, TO_DATE ('31-12-9999', 'dd-mm-yyyy')) >= NVL (resi_indirizzo.rinddata, TO_DATE ('01-01-1001', 'dd-mm-yyyy')) ORDER BY id_orig_d_persona, DT_INI_VAL_DATO, DT_FINE_VAL_DATO NULLS FIRST
rengine.jchain.in.6.key=RSITRSCRIPT_3
rengine.jchain.in.6.value=<RsIterator> <key table="DS_D_RESI_POSIFAMI_1_0"> <column name="RPOF_RFAMNUMF"/> <column name="RPOF_PERSNIND"/> <column name="RPOFDATA"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SIT_D_PC" livelloAnomalie="1"> <param id="field" value="id_orig_d_persona" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="id_orig_d_persona" dest="ID_ORIG_D_PERSONA" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_CIVICO" dest="ID_ORIG_D_CIVICO" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_INI_VAL_DATO" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_FINE_VAL_DATO" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> </commands> </RsIterator>
rengine.jchain.in.7.key=QUERYSQL_4
rengine.jchain.in.7.value=SELECT TO_CHAR (posifami.rpof_rfamnumf) id_orig_d_famiglia, rpof_rfamnumf, TO_CHAR (posifami.rpof_persnind) id_orig_d_persona, rpof_persnind, posifami.rpofdata dt_ini_val_dato, posifami.rpofdatfin dt_fine_val_dato, d_c.crepdesc relaz_par, posifami.caronte_data_inizio_val dt_exp_dato FROM ds_d_resi_posifami_1_0 posifami, ds_d_codi_relpar_1_0 d_c WHERE posifami.rpof_crepcodi = d_c.crepcodi(+) AND posifami.caronte_flag_elaborato = 0 ORDER BY id_orig_d_persona, dt_ini_val_dato, dt_fine_val_dato DESC NULLS FIRST
rengine.jchain.in.8.key=RSITRSCRIPT_4
rengine.jchain.in.8.value=<RsIterator> <key table="DS_D_RESI_POSIFAMI_1_0"> <column name="RPOF_RFAMNUMF"/> <column name="RPOF_PERSNIND"/> <column name="DT_INI_VAL_DATO"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="PERS_FAM" livelloAnomalie="1"> <param id="field" value="ID_ORIG_D_PERSONA" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="ID_ORIG_D_PERSONA" dest="ID_ORIG_D_PERSONA" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_FAMIGLIA" dest="ID_ORIG_D_FAMIGLIA" type="java.lang.String"/> <param id="field" value="RELAZ_PAR" dest="RELAZ_PAR" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_INI_VAL_DATO" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_FINE_VAL_DATO" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_RESI_POSIFAMI_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE RPOF_RFAMNUMF=? AND RPOF_PERSNIND = ? and RPOFDATA = ? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[RPOF_RFAMNUMF]] </param> <param name="param2"> [[RPOF_PERSNIND]] </param> <param name="param3"> [[DT_INI_VAL_DATO]] </param> <param name="param4"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.9.key=QUERYSQL_5
rengine.jchain.in.9.value=select TO_CHAR(CVIACODI) CODICE_VIA, CVIAAREA VIASEDIME, CVIADESC DESCRIZIONE_VIA, CARONTE_DATA_INIZIO_VAL DT_EXP_DATO, CVIACODI from DS_D_VIE_1_0 WHERE CARONTE_FLAG_ELABORATO = 0
rengine.jchain.in.10.key=RSITRSCRIPT_5
rengine.jchain.in.10.value=<RsIterator> <key table="DS_D_VIE_1_0"> <column name="CODICE_VIA"/> </key> <commands> <command name="SIT_D_VIA" livelloAnomalie="1"> <param id="field" value="CODICE_VIA" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="VIASEDIME" dest="VIASEDIME" type="java.lang.String"/> <param id="field" value="DESCRIZIONE_VIA" dest="DESCRIZIONE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_VIE_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE CVIACODI=? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[CVIACODI]] </param> <param name="param2"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.11.key=QUERYSQL_6
rengine.jchain.in.11.value=select TO_CHAR(ncivnciv) ID_ORIG,ncivnciv, to_char(NCIVNUME) NUMERO, NCIVBARR BARRATO, NCIVSCALA SCALA, TO_CHAR(nciv_cviacodi) CODICE_VIA, CARONTE_DATA_INIZIO_VAL DT_EXP_DATO, NCIVDATAIN DT_INI_VAL_DATO, NCIVDATAIN, TO_CHAR(NCIVCAP) CAP, NCIVDATAFI DT_FINE_VAL_DATO from DS_D_NUMERI_CIVICI_1_0 WHERE CARONTE_FLAG_ELABORATO =0
rengine.jchain.in.12.key=RSITRSCRIPT_6
rengine.jchain.in.12.value=<RsIterator> <key table="DS_D_NUMERI_CIVICI_1_0"> <column name="ID_ORIG"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SIT_D_CIVI" livelloAnomalie="2"> <param id="field" value="ID_ORIG" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="const" value="" dest="ID_ORIG_D_SEZIONE_ELETTORALE" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="const" dest="CIVICO_COMPOSTO" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="numero"> [[NUMERO]] </param> <param name="barrato"> [[BARRATO]] </param> <param name="scala"> [[SCALA]] </param> </complexParam> ]]> </param> <param id="field" value="CODICE_VIA" dest="ID_ORIG_D_VIA" type="java.lang.String"/> <param id="field" value="CAP" dest="CAP" type="java.lang.String"/> <param id="const" value="" dest="ID_ORIG_D_FRAZIONE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_INI_VAL_DATO" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="field" value="DT_FINE_VAL_DATO" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_NUMERI_CIVICI_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE ncivnciv=? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[NCIVNCIV]] </param> <param name="param2"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.13.key=QUERYSQL_7
rengine.jchain.in.13.value=SELECT LPAD (TO_CHAR (ccomprov), 3, '0') || LPAD (TO_CHAR (ccomcodi), 3, '0') chiave, LPAD (TO_CHAR (ccomprov), 3, '0') ccomprov_pad, ccomcodi, ccomprov, ccomdesc, ccomcfis, TO_CHAR (ccom_cstacodi) ccom_cstacodi, caronte_data_inizio_val dt_exp_dato FROM ds_d_comuni_1_0 WHERE caronte_flag_elaborato = 0
rengine.jchain.in.14.key=RSITRSCRIPT_7
rengine.jchain.in.14.value=<RsIterator> <key table="DS_D_COMUNI_1_0"> <column name="CCOMPROV"/> <column name="CCOMCODI"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SIT_COMUNE" livelloAnomalie="2"> <param id="field" value="CHIAVE" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="CCOMCFIS" dest="BELFIORE" type="java.lang.String"/> <param id="field" value="CCOMDESC" dest="DESCRIZIONE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> <param id="field" value="CCOMPROV_PAD" dest="ID_ORIG_PROVINCIA" type="java.lang.String"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_COMUNI_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE CCOMPROV=? AND CCOMCODI = ? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[CCOMPROV]] </param> <param name="param2"> [[CCOMCODI]] </param> <param name="param3"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.15.key=QUERYSQL_8
rengine.jchain.in.15.value=SELECT TO_CHAR(CSTACODI) CSTACODI, CSTADESC, CARONTE_DATA_INIZIO_VAL DT_EXP_DATO FROM DS_D_STATI_TERRITORI_1_0 WHERE CARONTE_FLAG_ELABORATO = 0
rengine.jchain.in.16.key=RSITRSCRIPT_8
rengine.jchain.in.16.value=<RsIterator> <key table="DS_D_STATI_TERRITORI_1_0"> <column name="CSTACODI"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SIT_STATO" livelloAnomalie="2"> <param id="field" value="CSTACODI" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="CSTADESC" dest="DESCRIZIONE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_STATI_TERRITORI_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE CSTACODI=? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[CSTACODI]] </param> <param name="param2"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.17.key=QUERYSQL_9
rengine.jchain.in.17.value=select MATRMATR, TO_CHAR(MATR_PERSNIND1) ID_ORIG_D_PERSONA1, TO_CHAR(matr_persnind2) ID_ORIG_D_PERSONA2, MATRDATA data_unione, lpad(matr_ccomprov,3, '0') || lpad(matr_ccomcodi,3, '0') ID_ORIG_D_COMUNE, lpad(matr_ccomprov,3, '0') ID_ORIG_D_PROVINCIA,ma.CARONTE_DATA_INIZIO_VAL DT_EXP_DATO from ds_d_matrimoni_1_0 ma WHERE CARONTE_FLAG_ELABORATO =0
rengine.jchain.in.18.key=RSITRSCRIPT_9
rengine.jchain.in.18.value=<RsIterator> <key table="ds_d_matrimoni_1_0"> <column name="MATRMATR"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SIT_D_UNIO" livelloAnomalie="1"> <param id="field" value="ID_ORIG_D_PERSONA1" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="const" value="" dest="GENER_UNIONE" type="java.lang.String"/> <param id="field" value="DATA_UNIONE" dest="DATA_UNIONE" type="java.sql.Timestamp"/> <param id="field" value="ID_ORIG_D_COMUNE" dest="ID_ORIG_D_COMUNE" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_PROVINCIA" dest="ID_ORIG_D_PROVINCIA" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_PERSONA1" dest="ID_ORIG_D_PERSONA1" type="java.lang.String"/> <param id="field" value="ID_ORIG_D_PERSONA2" dest="ID_ORIG_D_PERSONA2" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update ds_d_matrimoni_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE MATRMATR=? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[MATRMATR]] </param> <param name="param2"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>
rengine.jchain.in.19.key=QUERYSQL_10
rengine.jchain.in.19.value=SELECT TO_CHAR(CCIVCODI) CCIVCODI, CASE WHEN CCIVDESCMA = CCIVDESCFE THEN CCIVDESCMA ELSE CCIVDESCMA || '/' || CCIVDESCFE END DESCRIZIONE, CARONTE_DATA_INIZIO_VAL DT_EXP_DATO FROM DS_D_CODI_STATCIVILE_1_0 WHERE CARONTE_FLAG_ELABORATO = 0
rengine.jchain.in.20.key=RSITRSCRIPT_10
rengine.jchain.in.20.value=<RsIterator> <key table="DS_D_CODI_STATCIVILE_1_0"> <column name="CCIVCODI"/> <column name="DT_EXP_DATO"/> </key> <commands> <command name="SITDSTACIV" livelloAnomalie="1"> <param id="field" value="CCIVCODI" dest="ID_ORIG" type="java.lang.String"/> <param id="const" value="1" dest="FK_ENTE_SORGENTE" type="java.lang.Integer"/> <param id="field" value="DESCRIZIONE" dest="DESCRIZIONE" type="java.lang.String"/> <param id="field" value="DT_EXP_DATO" dest="DT_EXP_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_INI_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="" dest="DT_FINE_VAL_DATO" type="java.sql.Timestamp"/> <param id="const" value="0" dest="FLAG_DT_VAL_DATO" type="java.lang.Integer"/> </command> <command name="COMANDOSQL"> <param id="const" dest="SQL" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[<complexParam><param type="java.lang.String" name="paramsql1">update DS_D_CODI_STATCIVILE_1_0 SET CARONTE_FLAG_ELABORATO = 1 WHERE CCIVCODI=? AND CARONTE_DATA_INIZIO_VAL=?</param></complexParam>]]> </param> <param id="const" dest="PARAMETRI" type="it.webred.rulengine.type.ComplexParam"> <![CDATA[ <complexParam> <param name="param1"> [[CCIVCODI]] </param> <param name="param2"> [[DT_EXP_DATO]] </param> </complexParam> ]]> </param> </command> </commands> </RsIterator>