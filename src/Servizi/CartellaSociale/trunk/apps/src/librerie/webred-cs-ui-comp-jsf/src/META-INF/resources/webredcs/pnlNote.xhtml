<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
     	xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:p="http://primefaces.org/ui"
	  	xmlns:composite="http://java.sun.com/jsf/composite"
	  	xmlns:webred="http://java.sun.com/jsf/composite/webred">
      
	<h:head>
		<title>Note</title>
	</h:head>
	<h:body>
		<composite:interface componentType="pnlNote">
			<composite:attribute name="iNote" type="it.webred.cs.jsf.interfaces.INote"/>
			<composite:attribute name="disableModifica" default="false"/>
		</composite:interface>
		<composite:implementation>			
			
			<table border="0" width="100%">
				<tr>
					<td>
						<h:panelGrid columns="1">
							<h:outputText value="Note" style="font-weight: bold;"/>	
							<p:spacer height="10"/>
						</h:panelGrid>
					</td>
				</tr>
				<tr>
					<td>
						<p:inputTextarea value="#{cc.attrs.iNote.note}" maxlength="2000" counter="counter" 
						counterTemplate="{0} caratteri rimasti." cols="150" rows="8"/>
					</td>
				</tr>
				<tr>
					<td>
						<h:outputText id="counter" />  
					</td>
				</tr>
			</table>
			
			<h:panelGrid columns="1">
				<p:spacer height="20" />
				<p:commandButton value="Salva" process="@form" disabled="#{cc.attrs.disableModifica}"
					action="#{cc.attrs.iNote.salva}" update="@form">
					<p:confirm header="Conferma" message="Procedere con il salvataggio?" icon="ui-icon-alert"/>
				</p:commandButton>
				
				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
					<h:panelGrid columns="2" styleClass="centerAlign">
			        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
			        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
			        </h:panelGrid>     
			    </p:confirmDialog>
			</h:panelGrid> 		

		</composite:implementation>
	</h:body>
	
</html>