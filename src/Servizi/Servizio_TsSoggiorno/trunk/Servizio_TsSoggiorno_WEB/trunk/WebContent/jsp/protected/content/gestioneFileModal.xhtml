<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich">
 
<ui:composition >
	
	<h:form id="frmPanel">
		
		<h:panelGrid columns="1" style="width: 98%;">
		
			<h:outputText value="La dichiarazione deve essere firmata digitalmente ed avere estensione .p7m"  
			style="font-style:italic;color:#003399;"/>
			<h:outputText value="Caricando la dichiarazione non sarÃ  necessario l'invio con altri mezzi (cartaceo, PEC ...)"  
			style="font-style:italic;color:#003399;"/>
			<rich:spacer height="10px"></rich:spacer>
		
			<rich:fileUpload
			acceptedTypes="p7m" 
			ontyperejected="alert('Impossibile caricare il file selezionato! estensione diversa da .p7m');"
			fileUploadListener="#{gestioneFileBean.listener}"
			listHeight="75px"
			listWidth="100%"
			id="upload"
			progressLabel="Caricamento in corso..."
			stopControlLabel="Arresta"
			stopEntryControlLabel="Arresta"
			uploadControlLabel="Carica File"
			addControlLabel="Aggiungi File"
			cancelEntryControlLabel="Cancella"
			doneLabel="Caricamento completato"
			clearAllControlLabel="Cancella Tutto"
			clearControlLabel="Cancella"
			transferErrorLabel="Errore nel caricamento del file"
			sizeErrorLabel="Errore nelle dimensioni del file">		
       		 	<a4j:support event="oncancel" reRender="frmPanel" action="#{gestioneFileBean.initPanel}"/>
       		 	<a4j:support event="onclear" reRender="frmPanel" action="#{gestioneFileBean.initPanel}"/>           		
       		</rich:fileUpload>
       		       		
		 </h:panelGrid>
	         
	     <rich:spacer height="10px" />
	         
	     <h:panelGrid id="pnlBtn" columns="1" style="width: 100%; text-align: center;">
	     	<h:panelGroup>
				
				<h:commandButton							
				styleClass="myButton"
				style="width: 75px;"
				value="Conferma"
				id="btnConfermaAllegato"
				action="#{gestioneFileBean.doUpload}" 
				reRender="dichTableList"
				oncomplete="javascript:Richfaces.hideModalPanel('gestioneAllegatiPanel');"
				rendered="true">
	           	</h:commandButton>
	           	
	           	<a4j:commandButton							
				styleClass="myButton"
				style="width: 75px; margin-left: 10px;"
				value="Esci"
				id="btnEsciAllegato"
				onclick="Richfaces.hideModalPanel('gestioneAllegatiPanel'); return false;">
		       	</a4j:commandButton>
	       	
	       </h:panelGroup>	            	
	     </h:panelGrid>
	     		
	</h:form>
</ui:composition>
</html>