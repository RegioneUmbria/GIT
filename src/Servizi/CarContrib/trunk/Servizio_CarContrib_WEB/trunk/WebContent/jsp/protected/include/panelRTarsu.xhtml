<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core">

  		<ui:composition>
			<rich:modalPanel id="rTarsuPanel" 
				width="800" height="500" 
				moveable="true" resizeable="false" style="overflow:scroll;">
				<f:facet name="header"><h:outputText value="DETTAGLIO RUOLO TARSU" /></f:facet>
				<h:form>
					<h:panelGrid columns="1" width="100%">
				    	<a4j:outputPanel ajaxRendered="true">
				    			<rich:simpleTogglePanel switchType="client"  opened="true">
									<f:facet name="header">IMMOBILI</f:facet>
									<rich:dataTable width="100%"
								        	var="imm"
								        	value="#{contribuenteBean.ruoliVersCarContrib.selRTarsu.immobili}"
								        	columnClasses="col" 
								        	onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
											onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" 
											rowClasses="#{contribuenteBean.ruoliVersCarContrib.rTarsuFonte.coloreJsp}">
										
										<rich:column style="width:20px;">
											<f:facet name="header"><h:outputText value="Anno" /></f:facet>
											<h:outputLabel value="#{imm.anno}" />
										</rich:column>
										<rich:column style="text-align:left;">
											<f:facet name="header"><h:outputText value="Indirizzo" /></f:facet>
											<h:outputLabel value="#{imm.indirizzo}" />
										</rich:column>
										<rich:column style="text-align:left;">
											<f:facet name="header"><h:outputText value="Categoria" /></f:facet>
											<h:outputLabel value="#{imm.desCat}" />
										</rich:column>
										<rich:column style="text-align:left;">
											<f:facet name="header"><h:outputText value="Causale" /></f:facet>
											<h:outputLabel value="#{imm.causale}" />
										</rich:column>
										<rich:column width="20px;">
											<f:facet name="header"><h:outputText value="Tributo" /></f:facet>
											<h:outputLabel value="#{imm.codTributo}" />
										</rich:column>
										<rich:column  >
											<f:facet name="header"><h:outputText value="Mq" /></f:facet>
											<h:outputLabel value="#{imm.mq}" ><f:convertNumber type="number"/></h:outputLabel>
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Tariffa" /></f:facet>
											<h:outputLabel value="#{imm.tariffa}" ><f:convertNumber type="currency" currencyCode="EUR"/></h:outputLabel>
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Riduz." /></f:facet>
											<h:outputLabel value="#{imm.riduzione}" ><f:convertNumber type="currency" currencyCode="EUR"/></h:outputLabel>
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Importo" /></f:facet>
											<h:outputLabel value="#{imm.importo}" ><f:convertNumber type="currency" currencyCode="EUR"/></h:outputLabel>
										</rich:column>
									</rich:dataTable>
								</rich:simpleTogglePanel>
								<rich:spacer height="5px" />
								<rich:simpleTogglePanel switchType="client" opened="false" rendered="#{contribuenteBean.ruoliVersCarContrib.selRTarsu.ruolo.tipo eq 'S'}">
									<f:facet name="header">RIEPILOGO RUOLO PRINCIPALE</f:facet>
									<rich:panel>
									<f:facet name="header">Dati Immobili</f:facet>
									<rich:dataTable width="100%"
								        	var="imm"
								        	value="#{contribuenteBean.ruoliVersCarContrib.selRTarsu.listaSt}"
								        	columnClasses="col" 
								        	onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
											onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" 
											rowClasses="#{contribuenteBean.ruoliVersCarContrib.rTarsuFonte.coloreJsp}">
										
										<rich:column style="width:20px;">
											<f:facet name="header"><h:outputText value="Anno" /></f:facet>
											<h:outputLabel value="#{imm.anno}" />
										</rich:column>
										<rich:column style="text-align:left;">
											<f:facet name="header"><h:outputText value="Indirizzo" /></f:facet>
											<h:outputLabel value="#{imm.indirizzo}" />
										</rich:column>
										<rich:column width="20px;">
											<f:facet name="header"><h:outputText value="Tributo" /></f:facet>
											<h:outputLabel value="#{imm.codTributo}" />
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Importo" /></f:facet>
											<h:outputLabel value="#{imm.importo}" ><f:convertNumber type="currency" currencyCode="EUR"/></h:outputLabel>
										</rich:column>
										<rich:column width="90px;">
											<f:facet name="header"><h:outputText value="Fattura" /></f:facet>
											<h:outputLabel value="n. #{imm.numFattura} del " />
											<h:outputLabel value="#{imm.dataFattura}" ><f:convertDateTime timeZone="CET" pattern="dd/MM/yyyy" /></h:outputLabel>
										</rich:column>
								</rich:dataTable>
								</rich:panel>
								<rich:panel rendered="#{!empty contribuenteBean.ruoliVersCarContrib.selRTarsu.listaStSg}">
									<f:facet name="header">Sgravi</f:facet>
									<rich:dataTable width="100%"
								        	var="imm"
								        	value="#{contribuenteBean.ruoliVersCarContrib.selRTarsu.listaStSg}"
								        	columnClasses="col" 
								        	onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
											onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" 
											rowClasses="#{contribuenteBean.ruoliVersCarContrib.rTarsuFonte.coloreJsp}">
										
										<rich:column style="width:20px;">
											<f:facet name="header"><h:outputText value="Anno" /></f:facet>
											<h:outputLabel value="#{imm.anno}" />
										</rich:column>
										<rich:column style="text-align:left;">
											<f:facet name="header"><h:outputText value="Indirizzo" /></f:facet>
											<h:outputLabel value="#{imm.indirizzo}" />
										</rich:column>
										<rich:column width="20px;">
											<f:facet name="header"><h:outputText value="Tributo" /></f:facet>
											<h:outputLabel value="#{imm.codTributo}" />
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Importo" /></f:facet>
											<h:outputLabel value="#{imm.importo}" ><f:convertNumber type="currency" currencyCode="EUR"/></h:outputLabel>
										</rich:column>
										<rich:column width="90px;">
											<f:facet name="header"><h:outputText value="Fattura" /></f:facet>
											<h:outputLabel value="n. #{imm.numFattura} del " />
											<h:outputLabel value="#{imm.dataFattura}" ><f:convertDateTime timeZone="CET" pattern="dd/MM/yyyy" /></h:outputLabel>
										</rich:column>
										<rich:column width="90px;">
											<f:facet name="header"><h:outputText value="Nota" /></f:facet>
											<h:outputLabel value="n. #{imm.numNota} del " />
											<h:outputLabel value="#{imm.dataNota}" ><f:convertDateTime timeZone="CET" pattern="dd/MM/yyyy" /></h:outputLabel>
										</rich:column>
								</rich:dataTable>
								</rich:panel>
							</rich:simpleTogglePanel>
								<rich:spacer height="5px" />
								<rich:simpleTogglePanel switchType="client" opened="false">
									<f:facet name="header">RATE e VERSAMENTI</f:facet>
									<rich:panel>
									<f:facet name="header">Rate</f:facet>
									<rich:dataTable width="100%"
								        	var="elem"
								        	value="#{contribuenteBean.ruoliVersCarContrib.selRTarsu.rate}"
								        	columnClasses="col" 
								        	onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
											onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" 
											rowClasses="#{contribuenteBean.ruoliVersCarContrib.rTarsuFonte.coloreJsp}">
										
										<rich:column style="width:20px;">
											<f:facet name="header"><h:outputText value="Num." /></f:facet>
											<h:outputLabel rendered="#{elem.prog ne '0'}" value="#{elem.prog}" />
											<h:outputLabel rendered="#{elem.prog eq '0'}" value="Unica Soluzione" />
										</rich:column>
										<rich:column style="width:20px;">
											<f:facet name="header"><h:outputText value="Data Scadenza" /></f:facet>
											<h:outputLabel value="#{elem.dataScadenza}" ><f:convertDateTime timeZone="CET" pattern="dd/MM/yyyy" /></h:outputLabel>
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Importo" /></f:facet>
											<h:outputLabel value="#{elem.impBollettino}" ><f:convertNumber type="currency" currencyCode="EUR"/></h:outputLabel>
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Desc.Importo" /></f:facet>
											<h:outputLabel value="#{elem.totLettere}" ></h:outputLabel>
										</rich:column>
										<rich:column  >
											<f:facet name="header"><h:outputText value="V campo" /></f:facet>
											<h:outputLabel value="#{elem.vCampo}" ></h:outputLabel>
										</rich:column>
										<rich:column  >
											<f:facet name="header"><h:outputText value="Cod.Rend.Autom." /></f:facet>
											<h:outputLabel value="#{elem.codRendAuto}" ></h:outputLabel>
										</rich:column>
								</rich:dataTable>
								</rich:panel>
								<rich:spacer height="5px" />
								<rich:panel rendered="#{contribuenteBean.ruoliVersCarContrib.verTarsuBPFonte.abilitata}">
									<f:facet name="header">Versamenti Postali</f:facet>
									<rich:dataTable width="100%"
								        	var="elem"
								        	value="#{contribuenteBean.ruoliVersCarContrib.selRTarsu.listaVersBp}"
								        	columnClasses="col" 
								        	onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
											onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" 
											rowClasses="#{contribuenteBean.ruoliVersCarContrib.verTarsuBPFonte.coloreJsp}">
										
										<rich:column style="width:20px;">
											<f:facet name="header"><h:outputText value="Rata Rif." /></f:facet>
											<h:outputLabel rendered="#{elem.numRataRif ne '0'}" value="#{elem.numRataRif}" />
											<h:outputLabel rendered="#{elem.numRataRif eq '0'}" value="Unica Soluzione" />
										</rich:column>
										<rich:column>
											<f:facet name="header"><h:outputText value="V campo" /></f:facet>
											<h:outputLabel value="#{elem.numBollettino}" ></h:outputLabel>
										</rich:column>
										<rich:column style="text-align:left;">
											<f:facet name="header"><h:outputText value="Tipo Documento" /></f:facet>
											<h:outputLabel value="#{elem.descTipoDoc}" ></h:outputLabel>
										</rich:column>
										<rich:column style="text-align:right;">
											<f:facet name="header"><h:outputText value="Importo" /></f:facet>
											<h:outputLabel value="€ #{elem.importo}" />
										</rich:column>
										<rich:column >
											<f:facet name="header"><h:outputText value="Data Pagam." /></f:facet>
											<h:outputLabel value="#{elem.dtAccettazione}" ><f:convertDateTime timeZone="CET" pattern="dd/MM/yyyy" /></h:outputLabel>
										</rich:column>
										<rich:column style="width:20px;">
											<f:facet name="header"><h:outputText value=" Data Accred." /></f:facet>
											<h:outputLabel value="#{elem.dtAccredito}" ><f:convertDateTime timeZone="CET" pattern="dd/MM/yyyy" /></h:outputLabel>
										</rich:column>
										<rich:column >
											<f:facet name="header"><h:outputText value="CC Beneficiario" /></f:facet>
											<h:outputLabel value="#{elem.ccBeneficiario}" />
										</rich:column>
										<rich:column style="text-align:left; width:30px;">
											<f:facet name="header"><h:outputText value="Tipo" /></f:facet>
											<h:outputLabel value="#{elem.descTipoAccettazione}" ></h:outputLabel>
										</rich:column>
								</rich:dataTable>
								</rich:panel>
							</rich:simpleTogglePanel>
				        </a4j:outputPanel>
					</h:panelGrid>
					<rich:spacer height="20px"/>  
		            <table border="0" width="100%">
		             	<tr>
		             		<td align="center" >
								<a4j:commandButton styleClass="my-button" value="Chiudi" ajaxSingle="false" oncomplete="#{rich:component('rTarsuPanel')}.hide();"/>
		             		</td>
						</tr>	
			        </table>  
		        </h:form>
			</rich:modalPanel>
  		</ui:composition>
</html>